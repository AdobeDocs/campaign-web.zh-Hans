---
audience: end-user
title: 使用查询建模器构建您的第一个查询
description: 了解如何在Adobe Campaign Web查询建模器中构建您的第一个查询。
source-git-commit: 119b7a65cb39d3cdfb225a673ae6452d2a5359fc
workflow-type: tm+mt
source-wordcount: '1336'
ht-degree: 1%

---

# 构建您的第一个查询 {#build-query}

要开始构建查询，请从您选择的位置访问查询建模器，具体取决于您要执行的操作。 此时将打开查询建模器，并显示一个空白画布。 单击+按钮以添加查询的第一个节点。

![](assets/query-add-component.png)

可添加两种类型的元素：

* 过滤组件（自定义条件、选择受众、预定义过滤器）允许您构建自己的规则，选择受众或预定义过滤器以细化查询。

  示例 *订阅“体育”新闻稿的收件人*. *居住在纽约的收件人*， *居住在旧金山的收件人*

* 组运算符(AND、OR、EXCEPT)允许您根据自己的需求，将图中的过滤组件组合在一起。

  示例： *订阅“体育”新闻稿的收件人&#x200B;**和**住在纽约的人&#x200B;**或者**旧金山*.

有关如何添加和组合筛选组件和组运算符的详细步骤，请参见下文。

## 添加筛选组件

通过筛选组件，您可以使用以下内容优化查询：

* **自定义完成情况**：通过使用数据库和高级表达式的属性构建您自己的条件来筛选查询。
* **受众**：使用现有受众筛选查询。
* **预定义过滤器**：使用现有的预定义过滤器过滤查询。

### 构建自定义条件

要使用自定义条件筛选查询，请执行以下步骤：

1. 单击所需节点上的+按钮，然后选择 **[!UICONTROL 自定义完成情况]**.
1. 自定义条件属性窗格将在右侧打开。 在属性字段中，从数据库中选择用于创建条件的属性。

   可用属性表示Campaign数据库中的所有字段，包括链接到收件人表的表中的字段。

   ![](assets/query-custom-condition-fields.png)

   >[!NOTE]
   >
   >使用编辑表达式按钮，您可以利用Campaign Web表达式编辑器，使用数据库和帮助程序函数中的字段手动定义表达式。

1. 从下拉列表中选择要应用的运算符。

   +++可用运算符列表

   >[!NOTE]
   >
   >下拉列表中的可用运算符取决于所选属性的数据类型。

   | 操作员 | 用途 | 示例 |
   |  ---  |  ---  |  ---  |
   | 等于 | 返回与在第二个“值”列中输入的数据相同的结果。 | 姓氏(@lastName)等于“Jones”，将仅返回姓氏为Jones的收件人。 |
   | 不等于 | 返回与输入值不相同的所有值。 | 等于“英语”的语言(@language) |
   | 大于 | 返回大于输入值的值。 | 年龄(@age)大于50</strong>，将返回所有大于“50”的值，如“51”、“52”等。 |
   | 小于 | 返回小于输入值的值。 | 创建日期(@created)早于“DaysAgo(100)”</strong>，将返回之前100天创建的所有收件人。 |
   | 大于或等于 | 返回所有等于或大于输入值的值。 | 年龄(@age)大于或等于“30”</strong>，将返回所有30岁或以上的收件人。 |
   | 小于或等于 | 返回等于或小于输入值的所有值。 | 年龄(@age)小于或等于“60”</strong>，将返回所有60岁或以下的收件人。 |
   | 包含在 | 返回指定值中包含的结果。 这些值必须以逗号分隔。 | 出生日期(@birthDate)包含在“12/10/1979,12/10/1984”中，将返回这些日期之间出生的收件人。 |
   | 不在 | 其工作方式与包含在运算符中类似。 在本例中，我们要根据输入的值排除收件人。 | 出生日期(@birthDate)未列入`12/10/1979,12/10/1984`。 与上一个示例不同，不会返回这些日期内出生的收件人。 |
   | 为空 | 在这种情况下，我们要查找的结果与第二个“值”列中的空值匹配。 | Mobile (@mobilePhone)为空，则会返回所有没有手机号码的收件人。 |
   | 不为空 | 与Is empty运算符相反。 无需在第二个“值”列中输入数据。 | 电子邮件(@email)不为空。 |
   | 开始于 | 返回以输入值开头的结果。 | 帐户# (@account)以“32010”开头。 |
   | 开头不是 | 返回不以输入值开头的结果 | 帐户# (@account)不以“20”开头 |
   | 包含 | 返回至少包含输入值的结果。 | 电子邮件域(@domain)包含“mail”</strong>，将返回包含“mail”的所有域名。 因此，也会返回“gmail.com”域。 |
   | 不包含 | 返回不包含输入值的结果。 | 电子邮件域(@domain)不包含“vo”</strong>. 在这种情况下，将不返回包含“vo”的域名。 “voila.fr”域名将不会显示在结果中。 |
   | 类似 | Like与Contains运算符非常相似。 利用该运算符，可在值中插入%通配符。 | 姓氏(@lastName)，如“Jon%s”。 在本例中，如果操作员忘记了“n”和“s”之间缺少的字母，则使用通配符作为“绝招”来查找名称“Jones”。 |
   | 不相似 | Like与Contains运算符非常相似。 利用该运算符，可在值中插入%通配符。 | 姓氏(@lastName)不像“Smi%h”。 在此，将不会返回姓氏为“Smi%h”的收件人。 |

+++

1. 在值字段中，选择所需的值。

   您还可以利用Campaign Web表达式编辑器，使用数据库和帮助程序函数中的字段手动定义表达式。 为此，请单击“编辑表达式”按钮。

   *示例：查询返回21岁或以上的所有用户档案*

   ![](assets/query-custom-condition.png)

<!--
querying linked tables
collect additional information on the targeted population, e.g. contract numbers, subscriptions to newsletters or origin.
Select the type of data you want to add. This can be data belonging to the filtering dimension or data stored in linked tables. Select the table which contains the information you want to collect and click Next.

aggregates: Define a calculation mode for the field to be added, such as an aggregate for example.-->

### 选择受众

要使用现有受众筛选查询，请执行以下步骤：

1. 单击所需节点上的+按钮，然后选择 **[!UICONTROL 选择受众]**.

1. 选择受众属性窗格将在右侧打开。 选择要用于筛选查询的受众。

   *示例：查询返回属于“节日观看者”受众的所有用户档案*

   ![](assets/query-audience.png)

### 使用预定义过滤器

要使用预定义过滤器过滤查询，请执行以下步骤：

1. 单击所需节点上的+按钮，然后选择 **[!UICONTROL 预定义过滤器]**.

1. 选择受众属性窗格将在右侧打开。 从自定义筛选器列表或收藏夹中选择一个预定义筛选器。

   *示例：查询返回与“不活跃客户”预定义过滤器对应的所有用户档案。*

   ![](assets/query-predefined-filter.png)

## 将筛选组件与运算符相结合

将筛选组件添加到查询时，会在查询画布上自动创建新过渡，并且新筛选组件将通过AND运算符链接到第一个组件。 这意味着来自这两个筛选组件的结果将合并到查询结果中。

在此示例中，新的受众类型筛选组件添加到画布。 它会自动添加到新过渡中，并使用AND运算符链接到预定义过滤器类型条件。 在这种情况下，查询结果将包含受“Madridians”预定义过滤器定位的且属于“Discount hunter”受众的收件人。

![](assets/query-operator.png)

要更改用于将筛选条件链接在一起的运算符，请单击该运算符，然后在中选择所需的运算符。您可以通过单击该运算符并从右侧打开的“组”窗格中选择所需的运算符来更改该运算符。

![](assets/query-operator-change.png)

可用的运算符包括：

* AND（交集）：将来自叫客过渡中所有筛选组件的结果组合在一起。
* OR （并集）：包含叫客过渡中至少一个筛选组件的结果。
* EXCEPT（排除）：从叫客过渡的所有过滤组件中排除结果。

## 检查并验证查询

在画布中构建查询后，可以使用右侧的规则属性窗格检查查询。 可用的操作如下：

* **查看结果：** 显示查询生成的数据。
* **代码视图**：显示SQL中查询的基于代码的版本。
* **计算**：更新并显示查询所定向的记录数。
* **选择或保存筛选器**：选择要在画布中使用的现有预定义过滤器，或将查询另存为预定义过滤器以供将来重用。 [了解如何使用预定义过滤器](../get-started/predefined-filters.md)

  >[!IMPORTANT]
  >
  >从规则属性窗格中选择一个预定义过滤器，将画布中构建的查询替换为所选过滤器。
